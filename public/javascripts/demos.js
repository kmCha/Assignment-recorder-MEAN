var Modal=function(){function t(){u().onclick=function(t){if(t.target===this){var e=this,n=e.querySelector(".km-modal-content"),o=e.parentElement;i(o,e,n)}}}function e(){var t,e=document.querySelectorAll(".km-modal-wrap");for(t=e.length-1;t>=0;t--)!function(t){e[t].classList.add("openAnimation")}(t)}function n(){i=function(t){return function(e,n,o){var i=arguments,c=n.onclick||null,r=function(o){t.apply(this,i),document.body.removeEventListener("animationend",r),e.classList.remove("closeAnimation"),n.onclick=c};n.onclick=null,e.classList.add("closeAnimation"),document.body.addEventListener("animationend",r)}}(i)}function o(t,e,n){t.removeChild(n),e.appendChild(n),t.appendChild(e),t.classList.add("km-modal-show")}function i(t,e,n){e.removeChild(n),t.removeChild(e),t.appendChild(n),t.classList.remove("km-modal-show")}function c(){var t,e=document.createElement("link"),n=document.querySelectorAll(".km-modal-header");for(e.rel="stylesheet",e.href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css",document.head.appendChild(e),t=n.length-1;t>=0;t--)!function(t){var e=document.createElement("i");e.classList.add("fa","fa-times","km-modal-header-cross"),n[t].appendChild(e)}(t);return document.querySelectorAll(".km-modal-header-cross")}function r(t){for(var e=t.length-1;e>=0;e--)t[e].onclick=function(){var t=this.getAttribute("data-target"),e=document.querySelector("#"+t),n=u(),i=e.querySelector(".km-modal-content");o(e,n,i),n.offsetHeight<i.offsetHeight-40?n.classList.add("block"):n.classList.remove("block"),this.blur(),i.focus()}}function a(t){return t&&t.classList.contains("km-modal-wrap")?t:a(t.parentElement)}function l(t){for(var e=t.length-1;e>=0;e--)t[e].onclick=function(){var t=a(this),e=t.querySelector(".km-modal-shadow"),n=e.querySelector(".km-modal-content");i(t,e,n)}}function s(){var t,e=document.querySelectorAll(".km-modal-content");for(t=e.length-1;t>=0;t--)e[t].setAttribute("tabIndex","1"),e[t].onkeydown=function(t){var e=this,n=this.parentElement,o=a(this),c=t.charCode||t.keyCode;27===c&&i(o,n,e)}}var d=function(t){this.buttons=document.querySelectorAll("[data-toggle=modal]"),this.cancels=document.querySelectorAll("[data-dismiss=modal]"),this.conf=t};d.prototype.init=function(){var o=0;return function(){var i=this,a=function(){var a=i.buttons,d=i.cancels,u=i.conf;if(u&&u.close){var m=c();l(m)}u&&u.animation&&(e(),n()),u&&u.shadowClose&&t(),s(),l(d),r(a),o++},d=function(){return!1};return 0===o?a():d()}}();var u=function(){var t=null,e=function(){return t=document.createElement("div"),t.classList.add("km-modal-shadow"),n(),t},n=function(){var e;window.onresize=function(){clearTimeout(e),e=setTimeout(function(){t.style.height=window.innerHeight+"px",t.style.width=window.innerWidth+"px"},20)}};return function(){return t=t||e(),t.style.height=window.innerHeight+"px",t.style.width=window.innerWidth+"px",t}}();return d}();