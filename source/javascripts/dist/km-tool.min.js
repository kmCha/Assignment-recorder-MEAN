var KM=function(){var t={before:function(t,e){return function(){return e.apply(this,arguments),t.apply(this,arguments)}},after:function(t,e){return function(){var n=t.apply(this,arguments);return e.apply(this,arguments),n}},throttle:function(t,e){return function(){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},100)}},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},contains:function(t,e){if("function"==typeof t.contains)return t.contains(e);if("function"==typeof t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));var n=e.parentNode;do{if(n===t)return!0;n=n.parentNode}while(null!==n)},EventUtil:{fixEvent:function(t){function e(){return!0}function n(){return!1}if(!t||!t.stopPropagation){var r=t||window.event;t={};for(var a in r)t[a]=r[a];if(t.target||(t.target=t.srcElement||document),t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement,t.preventDefault=function(){t.returnValue=!1,t.isDefaultPrevented=e},t.isDefaultPrevented=n,t.stopPropagation=function(){t.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){this.isImmediatePropagationStopped=e,this.stopPropagation()},t.isImmediatePropagationStopped=n,null!==t.clientX){var o=document.documentElement,i=document.body;t.pageX=t.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t},clearResource:function(t,e){function n(t){for(var e in t)return!1;return!0}var r=KM.getData(t);0===r.handlers[e].length&&(delete r.handlers[e],document.removeEventListener?t.removeEventListener(e,r.dispatcher,!1):document.detachEvent&&t.detachEvent("on"+e,r.dispatcher)),n(r.handlers)&&(delete r.handlers,delete r.dispatcher),n(r)&&KM.removeData(t)},triggerEvent:function(t,e){var n=KM.getData(t),r=t.parentNode||t.ownerDocument;if("string"==typeof e&&(e={type:e,target:t}),e=KM.EventUtil.fixEvent(e),n.dispatcher&&n.dispatcher.call(t,e),r&&!e.isPropagationStopped())KM.EventUtil.triggerEvent(r,e);else if(!r&&!e.isDefaultPrevented()){var a=KM.getData(e.target);e.target[e.type]&&(a.disabled=!0,e.target[e.type](),a.disabled=!1)}}}},e=function(t){function e(){}return e.prototype=t,new e};t.inheritPrototype=function(t,n){var r=e(n.prototype);r.constructor=t,t.prototype=r};var n={},r=1,a="data-"+(new Date).getTime();t.getData=function(t){var e=t[a];return e||(e=t[a]=r++,n[e]={}),n[e]},t.removeData=function(t){var e=t[a];if(e){delete n[e];try{delete t[a]}catch(r){t.removeAttribute&&t.removeAttribute(a)}}};var o=1;return t.EventUtil.addEventListener=function(t,e,n){var r=KM.getData(t);r.dispatcher||(r.disabled=!1,r.dispatcher=function(e){if(!r.disabled){e=KM.EventUtil.fixEvent(e);var n=r.handlers[e.type];if(n)for(var a=0;a<n.length;a++)n[a].call(t,e)}}),r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[],document.addEventListener?t.addEventListener(e,r.dispatcher,!1):document.attachEvent&&t.attachEvent("on"+e,r.dispatcher)),n.guid||(n.guid=o++),r.handlers[e].push(n)},t.EventUtil.removeEventListener=function(t,e,n){var r=KM.getData(t);if(r.handlers){var a=function(e){r.handlers[e]=[],KM.EventUtil.clearResource(t,e)};if(e){var o=r.handlers[e];if(o){if(!n)return void a(e);if(n.guid)for(var i=0;i<o.length;i++)o[i].guid===n.guid&&o.splice(i--,1);KM.EventUtil.clearResource(t,e)}}else for(var c in r.handlers)a(c)}},t}();